---
published: true
title: CSRF与XSS简介
tags: security web 中文
---
# 前言
CSRF和XSS是两种较为常见的Web攻击方式。他们的共同之处在于都利用了HTML中可以用&lt;script&gt;&lt;/script&gt;执行javascript语句的特性，通过改写浏览器中运行的HTML来植入恶意的script，从而达到攻击的目的。

二者的一大区别在于CSRF是**攻击者伪装成受害者向服务器发出请求**，而XSS则是**攻击者向服务器给受害者的信息中注入script**。

在由CWE选出的[2022年Top25危险的软件漏洞](https://cwe.mitre.org/top25/archive/2022/2022_cwe_top25.html)中，XSS与CSRF分别位列第二、第九位，足以见得二者在Web安全领域的重要性。

![cwe top25](../images/posts/2023-02-24-CSRF与XSS简介/cwe25.png)

本文将分别对CSRF和XSS进行简单介绍，并给出一些基础的攻击思路以及防御的方法。
# CSRF
## 何为CSRF？
CSRF全称为Cross-Site Request Forgery，中文译为“跨站请求伪造”。字面上理解就是受害者原本正在访问（或最近登录过）合法的网站A，却突然被攻击者诱骗去访问了恶意网站B，而网站B会迫使受害者的浏览器向网站A发出请求，这样就达到了假扮受害者在网站A上进行操作的效果，例如假若A是银行网站，则攻击者可以代表受害者进行转账。

注意以上过程中，先决条件是**受害者正在访问或最近登录过合法网站A**，这是由于CSRF攻击的基础是**网站A会接受受害者浏览器的请求**，而这样的基础显然需要受害者已经登录了网站或网站“记住”了受害者的登录信息。CSRF正是利用了网站A对受害者的信任来假造恶意的请求。

我猜测你的心中现在有三个问题：（1）攻击者怎么让受害者访问恶意网站B？（2）什么叫“网站记住了受害者的登录信息”？（3）恶意网站B如何迫使受害者浏览器向网站A发出请求？

对于（1）（3）两个问题，我将在下文中详细解答，这里先对（2）进行回答。“网站记住了受害者的登录信息”，这个过程涉及的概念叫做**cookie**。